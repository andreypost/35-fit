"use strict";(self.webpackChunk_35_fit=self.webpackChunk_35_fit||[]).push([[187],{6419:(e,n,r)=>{r.d(n,{b:()=>a});var t=r(7294),o=r(7170),u=r(1317),i=r(5893),a=function(e){var n=e.children,r=(0,o.T)(),a=function(e){"Escape"===e.key&&r((0,u.as)())};return(0,t.useEffect)((function(){return window.scrollTo(0,0),document.addEventListener("keydown",(function(e){return a(e)})),function(){document.removeEventListener("keydown",a),r((0,u.as)())}})),(0,i.jsxs)("div",{className:"section header_banner",children:[n[0],n[1]]})}},7187:(e,n,r)=>{r.r(n),r.d(n,{default:()=>b});var t=r(8152),o=r(5861),u=r(7757),i=r.n(u),a=r(7294),s=r(6419),c=r(696),l=r(9828),f=function(){return f=Object.assign||function(e){for(var n,r=1,t=arguments.length;r<t;r++)for(var o in n=arguments[r])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},f.apply(this,arguments)},d=function(e){return{loading:null==e,value:e}},v=function(e,n){var r=!e&&!n,t=!!e&&!!n&&e.isEqual(n);return r||t},p=function(e,n,r){var t=function(e){var n=e?e():void 0,r=(0,a.useReducer)((function(e,n){switch(n.type){case"error":return f({},e,{error:n.error,loading:!1,value:void 0});case"reset":return d(n.defaultValue);case"value":return f({},e,{error:void 0,loading:!1,value:n.value});default:return e}}),d(n)),t=r[0],o=r[1],u=function(){var n=e?e():void 0;o({type:"reset",defaultValue:n})},i=function(e){o({type:"error",error:e})},s=function(e){o({type:"value",value:e})};return(0,a.useMemo)((function(){return{error:t.error,loading:t.loading,reset:u,setError:i,setValue:s,value:t.value}}),[t.error,t.loading,u,i,s,t.value])}(),o=t.error,u=t.loading,i=t.reset,s=t.setError,c=t.setValue,l=t.value,p=function(e,n){return function(e,n,r){var t=(0,a.useRef)(e);return(0,a.useEffect)((function(){n(e,t.current)||(t.current=e,r&&r())})),t}(e,v,n)}(n,i);(0,a.useEffect)((function(){if(p.current){if(e){var n=r&&r.snapshotListenOptions?p.current.onSnapshot(r.snapshotListenOptions,c,s):p.current.onSnapshot(c,s);return function(){n()}}p.current.get(r?r.getOptions:void 0).then(c).catch(s)}else c(void 0)}),[p.current]);var h=[l,u,o];return(0,a.useMemo)((function(){return h}),h)},h=r(5893);function m(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,n){if(e){if("string"==typeof e)return g(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?g(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var t=0,o=function(){};return{s:o,n:function(){return t>=e.length?{done:!0}:{done:!1,value:e[t++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var u,i=!0,a=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){a=!0,u=e},f:function(){try{i||null==r.return||r.return()}finally{if(a)throw u}}}}function g(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}var y=function(e){var n=e.width,r=e.height,t=e.border,u=(0,a.useRef)(null),s=function(){var e=(0,o.Z)(i().mark((function e(){var n,r,t,o,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.current,e.next=3,new Promise((function(e){return null==n?void 0:n.toBlob(e,"image/png")}));case 3:r=e.sent,(t=new FormData).append("image",r,"image.png"),o=m(t);try{for(o.s();!(a=o.n()).done;)s=a.value,console.log(s,r)}catch(e){o.e(e)}finally{o.f()}case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("canvas",{width:n,height:r,style:{border:t},ref:u,onMouseMove:function(e){var n=u.current,r=null==n?void 0:n.getContext("2d");null==r||r.lineTo(e.clientX,e.clientY),null==r||r.stroke()}}),(0,h.jsx)("input",{type:"button",value:"send blob data",onClick:s})]})};const b=function(){var e=(0,a.useContext)(l.y),n=e.firebase,r=e.user,u=e.firestore,f=(0,a.useState)(""),d=(0,t.Z)(f,2),v=d[0],m=d[1],g=function(e,n,r){var t=r?r.idField:void 0,o=r?r.refField:void 0,u=r?r.snapshotOptions:void 0,i=r?r.transform:void 0,s=p(e,n,r),c=s[0],l=s[1],f=s[2],d=[(0,a.useMemo)((function(){return c?c.docs.map((function(e){return function(e,n,r,t,o){if(e.exists){var u=e.data(n);return o&&(u=o(u)),r&&(u[r]=e.id),t&&(u[t]=e.ref),u}}(e,u,t,o,i)})):void 0}),[c,u,t,o,i]),l,f];return(0,a.useMemo)((function(){return d}),d)}(!0,u.collection("messages").orderBy("createdAt"),undefined),b=(0,t.Z)(g,2),x=b[0],w=b[1],j=function(){var e=(0,o.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log(v),u.collection("messages").add({uid:null==r?void 0:r.uid,displayName:null==r?void 0:r.displayName,photoUrl:null==r?void 0:r.photoURL,text:v,createdAt:n.firestore.FieldValue.serverTimestamp()}),m("");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return w&&c.$,(0,a.useEffect)((function(){var e,n;console.log((e=2,(n=function n(r){return e+=r,n}).toString=function(){return e},n)(3)(-2)(26))}),[]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)(s.b,{children:[(0,h.jsx)(y,{width:"100%",height:"250px",border:"1px solid red"}),(0,h.jsx)(h.Fragment,{})]}),(0,h.jsx)("h1",{children:"Chat"}),(0,h.jsx)("div",{children:null==x?void 0:x.map((function(e){return(0,h.jsxs)(a.Fragment,{children:[(0,h.jsx)("img",{src:e.photoUrl,alt:"",style:{borderRadius:"50%"}}),(0,h.jsxs)("p",{children:[e.text," - ",e.displayName]})]},e.text)}))}),(0,h.jsxs)("form",{action:"",id:"chatForm",onSubmit:j,children:[(0,h.jsx)("textarea",{name:"",id:"",onChange:function(e){return m(e.target.value)},value:v,required:!0}),(0,h.jsx)("button",{type:"submit",children:"send"})]})]})}}}]);
//# sourceMappingURL=187.bundle.js.map